
Running 1 test using 1 worker

[1A[2K[1/1] [chromium] ΓÇ║ e2e\b2b2c-full-flow.spec.ts:8:7 ΓÇ║ B2B2C Full Flow ΓÇ║ Complete Flow: Onboarding -> Admin Setup -> Customer Purchase
[1A[2K[chromium] ΓÇ║ e2e\b2b2c-full-flow.spec.ts:8:7 ΓÇ║ B2B2C Full Flow ΓÇ║ Complete Flow: Onboarding -> Admin Setup -> Customer Purchase
[TEST] Starting B2B2C Flow for Store: AutoStore 08zcb (autostore08zcb)

[1A[2K[PHASE 1] Starting Onboarding...

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: Image with src "/images/auth-hero-luxury.png" has "fill" but is missing "sizes" prop. Please add it to improve page performance. Read more: https://nextjs.org/docs/api-reference/next/image#sizes

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[PHASE 1] Form filled - Email: admin_60qum@test.com, Password: Password123!

[1A[2K[PHASE 1] Selecting Category...

[1A[2K[BROWSER]: [Fast Refresh] done in 6042ms

[1A[2K[PHASE 1] Selecting Theme...

[1A[2K[PHASE 1] Finalizing...

[1A[2K[PHASE 1 DEBUG] Tenant Registration Payload: {"name":"AutoStore 08zcb","domain":"autostore08zcb.localhost","plan":"BASIC","adminEmail":"admin_60qum@test.com","adminPassword":"Password123!","themeConfig":{"theme":"modern","categories":["fashion"]}}

[1A[2K[PHASE 1 DEBUG] AdminEmail in payload: admin_60qum@test.com

[1A[2K[PHASE 1 DEBUG] AdminPassword in payload: [SET]

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 543ms

[1A[2K[PHASE 1] Redirected to Tenant: http://autostore08zcb.localhost:3000/en/login

[1A[2K[PHASE 2] Admin Login...

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 145ms

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 373ms

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 377ms

[1A[2K[PHASE 2 DEBUG] Login Status: 200

[1A[2K[PHASE 2 ERROR] Login failed with UI error: 

[1A[2K[PHASE 2] Waiting for Admin Redirect...

[1A[2K[BROWSER]: [CLIENT DEBUG] Login State Return: {success: true, permissions: Array(20)}

[1A[2K[BROWSER]: [LOGIN DEBUG] Permissions received: [page:create, admin:read, page:update, product:read, user:read, product:update, analytics:read, product:create, product:delete, order:update, category:create, page:read, brand:update, category:read, review:update, brand:create, review:read, category:update, brand:read, order:read]

[1A[2K[BROWSER]: [LOGIN DEBUG] Checks: {isSuperAdmin: false, isAdmin: true}

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 182ms

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[PHASE 2] Logged into Admin Dashboard

[1A[2K[PHASE 2.1] Creating Product...

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: WebSocket connection to 'ws://localhost:8081/socket.io/?EIO=4&transport=websocket' failed: Error in connection establishment: net::ERR_CONNECTION_REFUSED

[1A[2K[BROWSER]: [Socket] Connection error: websocket error

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 218ms

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 283ms

[1A[2K[BROWSER]: WebSocket connection to 'ws://localhost:8081/socket.io/?EIO=4&transport=websocket' failed: Error in connection establishment: net::ERR_CONNECTION_REFUSED

[1A[2K[BROWSER]: [Socket] Connection error: websocket error

[1A[2K[PHASE 2.1] Waiting for Products page...

[1A[2K[PHASE 2.1] Products page loaded

[1A[2K[BROWSER]: Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[1A[2K[BROWSER]: Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[1A[2K[PHASE 2.1] Clicked Create Product button

[1A[2K[PHASE 2.1] Filled product name: Luxury Sofa qdziw

[1A[2K[PHASE 2.1] Found Category options: General

[1A[2K[PHASE 2.1] Selected Category by clicking option

[1A[2K[BROWSER]: WebSocket connection to 'ws://localhost:8081/socket.io/?EIO=4&transport=websocket' failed: Error in connection establishment: net::ERR_CONNECTION_REFUSED

[1A[2K[BROWSER]: [Socket] Connection error: websocket error

[1A[2K[PHASE 2.1] Found Brand options: Generic

[1A[2K[PHASE 2.1] Selected Brand by clicking option

[1A[2K[PHASE 2.1] Submit button enabled: true

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 154ms

[1A[2K[BROWSER]: WebSocket connection to 'ws://localhost:8081/socket.io/?EIO=4&transport=websocket' failed: Error in connection establishment: net::ERR_CONNECTION_REFUSED

[1A[2K[BROWSER]: [Socket] Connection error: websocket error

[1A[2K[PHASE 2.1] Product Created (or attempted)

[1A[2K[PHASE 3] Customer Purchase Flow...

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: WebSocket connection to 'ws://localhost:8080/socket.io/?EIO=4&transport=websocket' failed: WebSocket is closed before the connection is established.

[1A[2K[BROWSER]: Failed to load resource: the server responded with a status of 401 (Unauthorized)

[1A[2K[BROWSER]: WebSocket connection to 'ws://localhost:8081/socket.io/?EIO=4&transport=websocket' failed: Error in connection establishment: net::ERR_CONNECTION_REFUSED

[1A[2K[BROWSER]: [Socket] Connection error: websocket error

[1A[2K[BROWSER]: [Fast Refresh] done in 3623ms

[1A[2K[PHASE 3] Navigating to Store Home: http://autostore08zcb.localhost:3000/en

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 785ms

[1A[2K[PHASE 3] Page loaded. Title: Luxe | Premium E-Commerce

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 168ms

[1A[2K  1) [chromium] ΓÇ║ e2e\b2b2c-full-flow.spec.ts:8:7 ΓÇ║ B2B2C Full Flow ΓÇ║ Complete Flow: Onboarding -> Admin Setup -> Customer Purchase 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=Luxury Sofa qdziw')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('text=Luxury Sofa qdziw')[22m


      329 |     // Find Product - Might need reload if ISR/Cache
      330 |     await page.reload();
    > 331 |     await expect(page.locator(`text=${productName}`)).toBeVisible({
          |                                                       ^
      332 |       timeout: 10000,
      333 |     });
      334 |     await page.click(`text=${productName}`);
        at D:\ecommerce-main\web\e2e\b2b2c-full-flow.spec.ts:331:55

    Error Context: test-results\b2b2c-full-flow-B2B2C-Full-ef736-n-Setup---Customer-Purchase-chromium\error-context.md


[1A[2K  1 failed
    [chromium] ΓÇ║ e2e\b2b2c-full-flow.spec.ts:8:7 ΓÇ║ B2B2C Full Flow ΓÇ║ Complete Flow: Onboarding -> Admin Setup -> Customer Purchase 
