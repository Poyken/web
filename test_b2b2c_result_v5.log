
Running 1 test using 1 worker

[1A[2K[1/1] [chromium] ΓÇ║ e2e\b2b2c-full-flow.spec.ts:8:7 ΓÇ║ B2B2C Full Flow ΓÇ║ Complete Flow: Onboarding -> Admin Setup -> Customer Purchase
[1A[2K[chromium] ΓÇ║ e2e\b2b2c-full-flow.spec.ts:8:7 ΓÇ║ B2B2C Full Flow ΓÇ║ Complete Flow: Onboarding -> Admin Setup -> Customer Purchase
[TEST] Starting B2B2C Flow for Store: AutoStore gunksg (autostoregunksg)

[1A[2K[PHASE 1] Starting Onboarding...

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: Image with src "/images/auth-hero-luxury.png" has "fill" but is missing "sizes" prop. Please add it to improve page performance. Read more: https://nextjs.org/docs/api-reference/next/image#sizes

[1A[2K[PHASE 1] Form filled - Email: admin_ip1spo@test.com, Password: Password123!

[1A[2K[BROWSER]: [Fast Refresh] done in 3719ms

[1A[2K[PHASE 1] Selecting Category...

[1A[2K[PHASE 1] Selecting Theme...

[1A[2K[PHASE 1] Finalizing...

[1A[2K[PHASE 1 DEBUG] Tenant Registration Payload: {"name":"AutoStore gunksg","domain":"autostoregunksg.localhost","plan":"BASIC","adminEmail":"admin_ip1spo@test.com","adminPassword":"Password123!","themeConfig":{"theme":"modern","categories":["fashion"]}}

[1A[2K[PHASE 1 DEBUG] AdminEmail in payload: admin_ip1spo@test.com

[1A[2K[PHASE 1 DEBUG] AdminPassword in payload: [SET]

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 361ms

[1A[2K[PHASE 1] Redirected to Tenant: http://autostoregunksg.localhost:3000/en/login

[1A[2K[PHASE 2] Admin Login...

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 105ms

[1A[2K[PHASE 2 DEBUG] Login Status: 200

[1A[2K[PHASE 2 ERROR] Login failed with UI error: 

[1A[2K[PHASE 2] Waiting for Admin Redirect...

[1A[2K[BROWSER]: [CLIENT DEBUG] Login State Return: {success: true, permissions: Array(20)}

[1A[2K[BROWSER]: [LOGIN DEBUG] Permissions received: [user:read, review:update, review:read, product:delete, product:update, product:read, product:create, page:update, page:read, page:create, order:update, order:read, category:update, category:read, category:create, brand:update, brand:read, brand:create, analytics:read, admin:read]

[1A[2K[BROWSER]: [LOGIN DEBUG] Checks: {isSuperAdmin: false, isAdmin: true}

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 206ms

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 158ms

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[PHASE 2] Logged into Admin Dashboard

[1A[2K[PHASE 2.1] Creating Product...

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[BROWSER]: [HMR] connected

[1A[2K[BROWSER]: [Fast Refresh] rebuilding

[1A[2K[BROWSER]: [Fast Refresh] done in 787ms

[1A[2K[BROWSER]: WebSocket connection to 'ws://localhost:8081/socket.io/?EIO=4&transport=websocket' failed: Error in connection establishment: net::ERR_CONNECTION_REFUSED

[1A[2K[BROWSER]: [Socket] Connection error: websocket error

[1A[2K[PHASE 2.1] Waiting for Products page...

[1A[2K[PHASE 2.1] Products page loaded

[1A[2K[BROWSER]: Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[1A[2K[BROWSER]: Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

[1A[2K[PHASE 2.1] Clicked Create Product button

[1A[2K  1) [chromium] ΓÇ║ e2e\b2b2c-full-flow.spec.ts:8:7 ΓÇ║ B2B2C Full Flow ΓÇ║ Complete Flow: Onboarding -> Admin Setup -> Customer Purchase 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('[role="dialog"], .dialog, [data-state="open"]')
    Expected: visible
    Error: strict mode violation: locator('[role="dialog"], .dialog, [data-state="open"]') resolved to 2 elements:
        1) <div data-state="open" aria-hidden="true" data-aria-hidden="true" data-slot="dialog-overlay" class="data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-150 bg-black/50"></div> aka locator('.data-\\[state\\=open\\]\\:animate-in').first()
        2) <div role="dialog" tabindex="-1" id="radix-_r_0_" data-state="open" data-slot="dialog-content" aria-labelledby="radix-_r_1_" aria-describedby="radix-_r_2_" class="bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-150 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lgΓÇª>ΓÇª</div> aka getByRole('dialog', { name: 'Create New Product' })

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('[role="dialog"], .dialog, [data-state="open"]')[22m


      193 |     await expect(
      194 |       page.locator('[role="dialog"], .dialog, [data-state="open"]'),
    > 195 |     ).toBeVisible({ timeout: 10000 });
          |       ^
      196 |
      197 |     const productName = `Luxury Sofa ${getRandomString()}`;
      198 |     // Fill in the product form in dialog
        at D:\ecommerce-main\web\e2e\b2b2c-full-flow.spec.ts:195:7

    Error Context: test-results\b2b2c-full-flow-B2B2C-Full-ef736-n-Setup---Customer-Purchase-chromium\error-context.md


[1A[2K  1 failed
    [chromium] ΓÇ║ e2e\b2b2c-full-flow.spec.ts:8:7 ΓÇ║ B2B2C Full Flow ΓÇ║ Complete Flow: Onboarding -> Admin Setup -> Customer Purchase 
